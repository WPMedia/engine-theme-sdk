import Image from '../src/components/Image';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';

<Meta title="Image" component={Image} />

# Image

The `Image` component is used to replace the `img` tag, providing a fast, responsive and resized image for your blocks.

This component uses [`lazy-child`](https://www.npmjs.com/package/lazy-child) which has a dependency on IntersectionObserver which is not supported in all browsers [see support](https://caniuse.com/#feat=intersectionobserver) - if you need to support browsers that do not have IntersectionObserver you will need to use a polyfill. The IntersectionObserver polyfill is already included with the theme blocks output types.

- [How To Make Your Images Load Speedy, Secure, and SEO-Friendly](https://github.com/WPMedia/fusion/blob/2.5-hydrate/documentation/recipes/best-practices-images.md)

- [Secure Image Resizing Quickstart](https://github.com/WPMedia/fusion/blob/2.5-hydrate/documentation/recipes/secure-speedy-images.md)

## Use

Import it into a block:

```
import { Image } from '@wpmedia/engine-theme-sdk';

...

<Image
    url={rawURL}
    alt={alt}
    smallWidth={smallWidth}
    smallHeight={smallHeight}
    mediumWidth={mediumWidth}
    mediumHeight={mediumHeight}
    largeWidth={largeWidth}
    largeHeight={largeHeight}
    resizedImageOptions={resizedParams}
    resizerURL={resizerURL}
    breakpoints={breakpoints}
/>

...

```



## Props
<Props of={Image} />

## Stories

<Story name="Basic" />

### **With widths and heights**
<Preview>
    <Story name="With widths and heights">
        <div>
            <p>Scroll down to see lazy loading example</p>
            <Image
                url={'https://arc-anglerfish-arc2-prod-corecomponents.s3.amazonaws.com/public/37UMUNYNOVCEJDZW5SBKBXNMO4.jpg'}
                alt={'Aerial view of bridge'}
                smallWidth={158}
                smallHeight={89}
                mediumWidth={274}
                mediumHeight={154}
                largeWidth={274}
                largeHeight={154}
                resizedImageOptions={{
                    '158x89': '/r4YXPy4Eh2thx80bDTxRZM9Syhw=filters:format(jpg):quality(70)/',
                    '274x154': '/sDwhmVtwayjjDJww8CvlWjpydGM=filters:format(jpg):quality(70)/',
                }}
                resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
                breakpoints={{
                    small: 420,
                    medium: 768,
                    large: 992,
                }}
            />
            <p style={{ height: '150vh' }}></p>
            <Image
                url={'https://cloudfront-us-east-1.images.arcpublishing.com/corecomponents/P3V3THIJPVGUBLRIIYWKFHZTKA.jpg'}
                alt={'Surfer paddling out in the ocean'}
                smallWidth={800}
                smallHeight={600}
                mediumWidth={800}
                mediumHeight={600}
                largeWidth={800}
                largeHeight={600}
                resizedImageOptions={{
                    '800x600': '/ncyEH4gZKt-brhaXCK_GfHw3I6Q=filters:format(jpg):quality(70)/',
                }}
                resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
                breakpoints={{
                    small: 420,
                    medium: 768,
                    large: 992,
                }}
            />
            <p style={{ height: '150vh' }}></p>
            <Image
                url={'https://arc-anglerfish-arc2-prod-corecomponents.s3.amazonaws.com/public/37UMUNYNOVCEJDZW5SBKBXNMO4.jpg'}
                alt={'Aerial view of bridge'}
                smallWidth={158}
                smallHeight={89}
                mediumWidth={274}
                mediumHeight={154}
                largeWidth={274}
                largeHeight={154}
                resizedImageOptions={{
                    '158x89': '/r4YXPy4Eh2thx80bDTxRZM9Syhw=filters:format(jpg):quality(70)/',
                    '274x154': '/sDwhmVtwayjjDJww8CvlWjpydGM=filters:format(jpg):quality(70)/',
                }}
                resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
                breakpoints={{
                    small: 420,
                    medium: 768,
                    large: 992,
                }}
            />
        </div>
    </Story>
</Preview>

### **With widths and heights and lightbox**
<Preview>
    <Story name="With widths, heights and lightbox">
        <Image
            url={'https://arc-anglerfish-arc2-prod-corecomponents.s3.amazonaws.com/public/37UMUNYNOVCEJDZW5SBKBXNMO4.jpg'}
            alt={'Aerial view of bridge'}
            smallWidth={158}
            smallHeight={89}
            mediumWidth={274}
            mediumHeight={154}
            largeWidth={274}
            largeHeight={154}
            resizedImageOptions={{
                '158x89': '/r4YXPy4Eh2thx80bDTxRZM9Syhw=filters:format(jpg):quality(70)/',
                '274x154': '/sDwhmVtwayjjDJww8CvlWjpydGM=filters:format(jpg):quality(70)/',
            }}
            resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
            breakpoints={{
                small: 420,
                medium: 768,
                large: 992,
            }}
            lightBoxWidth={274}
            lightBoxHeight={154}
        />
    </Story>
</Preview>

### **Without resizer URL**
<Preview>
    <Story name="Without resizer URL">
        <Image
            url={'https://arc-anglerfish-arc2-prod-corecomponents.s3.amazonaws.com/public/37UMUNYNOVCEJDZW5SBKBXNMO4.jpg'}
            alt={'Aerial view of bridge'}
            smallWidth={158}
            smallHeight={89}
            mediumWidth={274}
            mediumHeight={154}
            largeWidth={274}
            largeHeight={154}
            resizedImageOptions={{
                '158x89': '/r4YXPy4Eh2thx80bDTxRZM9Syhw=filters:format(jpg):quality(70)/',
                '274x154': '/sDwhmVtwayjjDJww8CvlWjpydGM=filters:format(jpg):quality(70)/',
            }}
            resizerURL={''}
            breakpoints={{
                small: 420,
                medium: 768,
                large: 992,
            }}
            lightBoxWidth={274}
            lightBoxHeight={154}
        />
    </Story>
</Preview>

### **Without breakpoints**
<Preview>
    <Story name="Without breakpoints">
        <Image
            url={'https://arc-anglerfish-arc2-prod-corecomponents.s3.amazonaws.com/public/37UMUNYNOVCEJDZW5SBKBXNMO4.jpg'}
            alt={'Aerial view of bridge'}
            smallWidth={158}
            smallHeight={89}
            mediumWidth={274}
            mediumHeight={154}
            largeWidth={274}
            largeHeight={154}
            resizedImageOptions={{
                '158x89': '/r4YXPy4Eh2thx80bDTxRZM9Syhw=filters:format(jpg):quality(70)/',
                '274x154': '/sDwhmVtwayjjDJww8CvlWjpydGM=filters:format(jpg):quality(70)/',
            }}
            resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
            breakpoints={{}}
            lightBoxWidth={274}
            lightBoxHeight={154}
        />
    </Story>
</Preview>

### **No resized params**
<Preview>
    <Story name="No resized params">
        <Image
            url={'https://arc-anglerfish-arc2-prod-corecomponents.s3.amazonaws.com/public/37UMUNYNOVCEJDZW5SBKBXNMO4.jpg'}
            alt={'Aerial view of bridge'}
            smallWidth={158}
            smallHeight={89}
            mediumWidth={274}
            mediumHeight={154}
            largeWidth={274}
            largeHeight={154}
            resizedImageOptions={{}}
            resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
            breakpoints={{
                small: 420,
                medium: 768,
                large: 992,
            }}
            lightBoxWidth={274}
            lightBoxHeight={154}
        />
    </Story>
</Preview>

<!-- // https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer/74FUDjj5P9QGqVekHa1JSdaSU1M=/fit-in/274x183/filters:quality(70):fill(white):background_color(white)/arc-anglerfish-staging-staging.s3.amazonaws.com/public/NA6FMAXWP5DR3FDZQ7SGJ3C3FE.png  -->

### **For fit in logic, with placeholder**
<Preview>
    <Story name="For fit in logic, with placeholder">        
      <Image
            url={'https://arc-anglerfish-staging-staging.s3.amazonaws.com/public/NA6FMAXWP5DR3FDZQ7SGJ3C3FE.png'}
            alt={'brand'}
            smallWidth={158}
            smallHeight={89}
            mediumWidth={274}
            mediumHeight={154}
            largeWidth={274}
            largeHeight={154}
            resizedImageOptions={{
              "84x0": "ypPWGXyZQIfvus8XpYlHcz9s-2M=/fit-in/84x0/filters:quality(70):fill(white):background_color(white)/",
"84x47": "Gw1ATz6cGk1Op8Yjnb9XBfe-10U=/fit-in/84x47/filters:quality(70):fill(white):background_color(white)/",
"84x56": "b5wfZSSCrPhbJrORnvG5FXMoDr4=/fit-in/84x56/filters:quality(70):fill(white):background_color(white)/",
"84x63": "CD5KPCY_fwSMCI_xytqY_GFeXO0=/fit-in/84x63/filters:quality(70):fill(white):background_color(white)/",
"84x84": "g9s6e6Xg5fUugoCvSi6ozD9U4RA=/fit-in/84x84/filters:quality(70):fill(white):background_color(white)/",
"105x0": "OzGNyBo2WPsnUeAg11pcLYsNN7w=/fit-in/105x0/filters:quality(70):fill(white):background_color(white)/",
"105x59": "ElJJzRWq1ZB82l4keqayBsGhOhM=/fit-in/105x59/filters:quality(70):fill(white):background_color(white)/",
"105x70": "e6iZtVfaJOxIs342PGXoM-Y5Nu4=/fit-in/105x70/filters:quality(70):fill(white):background_color(white)/",
"105x79": "MRwmeksbWfCFE523W0vmz2Lvumo=/fit-in/105x79/filters:quality(70):fill(white):background_color(white)/",
"105x105": "irmzJqlUTrRGDvY2bMfhcx_5Ahc=/fit-in/105x105/filters:quality(70):fill(white):background_color(white)/",
"158x0": "qdxfL8Ms-GjEXSvEPFrR0MMJVfI=/fit-in/158x0/filters:quality(70):fill(white):background_color(white)/",
"158x89": "r7SMPMvoPdoraJUSo3Jqo1mhUlY=/fit-in/158x89/filters:quality(70):fill(white):background_color(white)/",
"158x105": "ciIbzGLGGntlmMxW-OXZ_OFsQfs=/fit-in/158x105/filters:quality(70):fill(white):background_color(white)/",
"158x119": "_r5tCmSEITOO3NTJLBkot61mzBA=/fit-in/158x119/filters:quality(70):fill(white):background_color(white)/",
"158x158": "vMMvyypjSX4SntqGzufNzKSlll4=/fit-in/158x158/filters:quality(70):fill(white):background_color(white)/",
"274x0": "7lwbXw39fsb7SslOOiUxu1ly4gc=/fit-in/274x0/filters:quality(70):fill(white):background_color(white)/",
"274x154": "DdErna-7pp6myk9CrCpHdgiGQrA=/fit-in/274x154/filters:quality(70):fill(white):background_color(white)/",
"274x183": "74FUDjj5P9QGqVekHa1JSdaSU1M=/fit-in/274x183/filters:quality(70):fill(white):background_color(white)/",
"274x206": "NL8g53815dsUhgTS3jXC7rdAt4U=/fit-in/274x206/filters:quality(70):fill(white):background_color(white)/",
"274x274": "MDrtZOPpTHNfaBvyvUpoDRp_Pmw=/fit-in/274x274/filters:quality(70):fill(white):background_color(white)/",
"377x0": "akEakgCNST0luHQSfxw9JFGhTI4=/fit-in/377x0/filters:quality(70):fill(white):background_color(white)/",
"377x212": "8TDhSLyZg_kUCihvynOQi06pYzg=/fit-in/377x212/filters:quality(70):fill(white):background_color(white)/",
"377x251": "CTkC4Qg7ArqcadymT-6hF6kpQcQ=/fit-in/377x251/filters:quality(70):fill(white):background_color(white)/",
"377x283": "0u2mo8HtMOnqPnQPtxKoxRqfE04=/fit-in/377x283/filters:quality(70):fill(white):background_color(white)/",
"377x377": "ievAZC23UVlp0pDO9i_vYd4Mzns=/fit-in/377x377/filters:quality(70):fill(white):background_color(white)/",
"400x0": "v5yK4OiOsizjnS5QUES6os7edxU=/fit-in/400x0/filters:quality(70):fill(white):background_color(white)/",
"400x225": "-pXO6s24r9KmlC-6siXm4uzrKxg=/fit-in/400x225/filters:quality(70):fill(white):background_color(white)/",
"400x267": "hBPl4S4C9ngZRqmRAJ-Op0njTlo=/fit-in/400x267/filters:quality(70):fill(white):background_color(white)/",
"400x300": "Gcq-GY6hHc7VbCX4ZY8PBuqVjF4=/fit-in/400x300/filters:quality(70):fill(white):background_color(white)/",
"400x400": "9PtxKndKHARFk6D0ynV-eeWSyow=/fit-in/400x400/filters:quality(70):fill(white):background_color(white)/",
"600x0": "OiKZ9gjSp-91zxKMjn6d7I9Xn0Q=/fit-in/600x0/filters:quality(70):fill(white):background_color(white)/",
"600x338": "-GfTnJijLXqUVhdTdiyE9l0_yeI=/fit-in/600x338/filters:quality(70):fill(white):background_color(white)/",
"600x400": "m617pE8A870PD_Ceg3c8lLzsMY8=/fit-in/600x400/filters:quality(70):fill(white):background_color(white)/",
"600x450": "09o5mViAlwuxUTgL6vkoXkCfchE=/fit-in/600x450/filters:quality(70):fill(white):background_color(white)/",
"600x600": "rxxPemZQ3CI0OrPBoSnSHQKPhpA=/fit-in/600x600/filters:quality(70):fill(white):background_color(white)/",
"768x0": "EzouokEblmG43adARCILjk7ioSg=/fit-in/768x0/filters:quality(70):fill(white):background_color(white)/",
"768x432": "vMR3AlfbO_ZZ2FuJYh18eHD7LQM=/fit-in/768x432/filters:quality(70):fill(white):background_color(white)/",
"768x512": "42Gq8nwJdwiwDGEjvXIRosQPvKM=/fit-in/768x512/filters:quality(70):fill(white):background_color(white)/",
"768x576": "ji27jOy0l-Kaj5T654LhgVRXWpw=/fit-in/768x576/filters:quality(70):fill(white):background_color(white)/",
"768x768": "Exeh9lKLfeQ8EY8BFF6MAIWw8f4=/fit-in/768x768/filters:quality(70):fill(white):background_color(white)/",
"800x0": "XuPV6Xyq1DZfouUYaTClp4KtmVk=/fit-in/800x0/filters:quality(70):fill(white):background_color(white)/",
"800x450": "TJxjOo89SZxFXQZwqRbmk1W62po=/fit-in/800x450/filters:quality(70):fill(white):background_color(white)/",
"800x533": "7-ZUOzJOw3UKHN0nCjkYUWYMMhg=/fit-in/800x533/filters:quality(70):fill(white):background_color(white)/",
"800x600": "r2VBjzND5c-k4G6JEpzyYpGHngs=/fit-in/800x600/filters:quality(70):fill(white):background_color(white)/",
"800x800": "xzLASjSBuaDaTlfQfKRfNx_TXtQ=/fit-in/800x800/filters:quality(70):fill(white):background_color(white)/",
"1024x0": "-i8cZWpmS7BVf7n-tGixdIhRdPc=/fit-in/1024x0/filters:quality(70):fill(white):background_color(white)/",
"1024x576": "srrkeFOCj6KdudRPul8F6l4vFqs=/fit-in/1024x576/filters:quality(70):fill(white):background_color(white)/",
"1024x683": "zxZMYm5rP9oYWRMp7xg_cjqLssM=/fit-in/1024x683/filters:quality(70):fill(white):background_color(white)/",
"1024x768": "dLGtbpAl3oNYQ29b8b8vIIW8USg=/fit-in/1024x768/filters:quality(70):fill(white):background_color(white)/",
"1024x1024": "RkTnuW6j5K7QDCOkBuXOQNxF0zM=/fit-in/1024x1024/filters:quality(70):fill(white):background_color(white)/",
"1440x0": "9dzRorTa9AFZvec138wzfAzZnOs=/fit-in/1440x0/filters:quality(70):fill(white):background_color(white)/",
"1440x810": "xjFGAhcROAHGIJjQF0-VXGgP5UA=/fit-in/1440x810/filters:quality(70):fill(white):background_color(white)/",
"1440x960": "lM113UEvbUcBQmfUxaxjjvymfL8=/fit-in/1440x960/filters:quality(70):fill(white):background_color(white)/",
"1440x1080": "yeoeeTujSHwDjTerpiwXiZziqyg=/fit-in/1440x1080/filters:quality(70):fill(white):background_color(white)/",
"1440x1440": "C01cML7mEmfmz3nF_uKCcmQAsdo=/fit-in/1440x1440/filters:quality(70):fill(white):background_color(white)/",
"1600x0": "ILJn0fFa7NIsStekj_TtlBCSvBU=/fit-in/1600x0/filters:quality(70):fill(white):background_color(white)/",
"1600x900": "_1NLnVpYWGV_sSMu4bNaPViOM-Y=/fit-in/1600x900/filters:quality(70):fill(white):background_color(white)/",
"1600x1067": "BP4BtQEHW2PIahEZ0Iha-zIXoFY=/fit-in/1600x1067/filters:quality(70):fill(white):background_color(white)/",
"1600x1200": "7PiVpqa_FxTcR0Yj_aLC7WpnjzQ=/fit-in/1600x1200/filters:quality(70):fill(white):background_color(white)/",
"1600x1600": "CQcCSFygCQqghFAVoFOYMGePDKg=/fit-in/1600x1600/filters:quality(70):fill(white):background_color(white)/",
            }}
            resizerURL={'https://corecomponents-the-prophet-prod.cdn.arcpublishing.com/resizer'}
            breakpoints={{
                small: 420,
                medium: 768,
                large: 992,
            }}
            lightBoxWidth={274}
            lightBoxHeight={154}
        />
    </Story>
</Preview>